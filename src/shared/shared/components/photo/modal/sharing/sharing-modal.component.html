<modal #modal [keyboard]="false" [animation]="false" [backdrop]="'static'">
  <modal-header [show-close]="true">
    <h4 class="modal-title">Sharing</h4>
  </modal-header>
  <modal-body>
    <div class="form-group">
      <p-autoComplete *ngIf="mode!=operation.editing" [(ngModel)]="textContacts"
                      [suggestions]="filteredContacts"
                      [multiple]="true"
                      [minLength]="1"
                      field="name"
                      (onSelect)="selectContact($event)"
                      (onUnselect)="unSelectContact($event)"
                      (completeMethod)="contactTerm$.next($event)">
      </p-autoComplete>
      <p *ngIf="mode==operation.editing" class="text-left changing padding8 rounded border border-danger border-1">
        <i class="fa fa-exclamation-triangle text-danger"></i>
        You have made changes that you need to save!
      </p>

    </div>
    <div class="modal-body-collapse" *ngIf="sharedContacts?.length">
      <a role="button" data-toggle="collapse" href="#collapseContact" aria-expanded="false"
         aria-controls="collapseExample">
        Shared with {{ sharedContacts?.length }} Contacts
      </a>
      <div class="collapse in pre-scrollable" id="collapseContact">
        <div class="modal-body-collapse-in">
          <div class="media-list-item" *ngFor="let contact of sharedContacts">
            <div class="media" [ngClass]="isDeletedItem(contact.id) ? 'remove': ''">
              <div class="media-left">
                <figure>
                  <img [src]="contact.profile_image" alt="">
                </figure>
              </div>
              <div class="media-body">
                {{ contact.name }}
              </div>

              <div class="media-right">
                <a class="btn btn-default" (click)="toggleRemoving($event, contact.id)"
                   [title]="isDeletedItem(contact.id) ? 'Undo removing':'Remove'"
                   href="javascript:void(0)">
                  <i *ngIf="!isDeletedItem(contact.id)" class="fa fa-times" title="remove"></i>
                  <i *ngIf="isDeletedItem(contact.id)" class="fa fa-undo" title="Undo removing"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </modal-body>
  <modal-footer>

    <button *ngIf="hasChanged" type="button" class="btn btn-outline-default btn-min" (click)="cancel()">Cancel</button>
    <button *ngIf="!hasChanged" type="button" (click)="close()"
            class="btn btn-outline-primary btn-min">Done    </button>
    <button *ngIf="hasChanged" type="button" (click)="save()"
            class="btn btn-outline-primary btn-min">Save
    </button>
  </modal-footer>
</modal>
