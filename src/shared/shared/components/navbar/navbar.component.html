<nav class="header-nav" [ngClass]="{'header-nav-xs-show-search': showSearchMobile}" role="navigation">
  <div class="container-fluid">
    <ng-content></ng-content>

    <div class="header-nav-right">
      <ng-template [ngIf]="!userService.loggedIn">
        <div class="hidden-xs">
          <div class="btn-group header-nav-link">
            <a [routerLink]="['/signup']" class="btn btn-link" href="#">Sign up</a>
          </div>
          <div class="btn-group header-nav-link">
            <a [routerLink]="['/login']" class="btn btn-link" href="#">Log in</a>
          </div>
        </div>
      </ng-template>
      <ng-template [ngIf]="userService.loggedIn">
        <div class="btn-group header-nav-search-btn visible-xs-inline-block">
          <button (click)="onShowSearchMobile($event)" type="button" class="btn btn-default">
            <i class="fa fa-search"></i>
          </button>
        </div>
        <div class="btn-group header-nav-apps">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                  pTooltip="{{ tooltip.wthApps }}" tooltipPosition="bottom">
            <i class="fa fa-th"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <a (click)="redirectTo('social', '', $event)" href="javascript:void(0);">
                <i class="fa fa-globe"></i>
                <span>Social</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('chat', '', $event)" href="javascript:void(0);">
                <i class="fa fa-comments"></i>
                <span>Chat</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('media', '', $event)" href="javascript:void(0);">
                <i class="fa fa-picture-o"></i>
                <span>Pictures</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('contacts', '', $event)" href="javascript:void(0);">
                <i class="fa fa-address-book"></i>
                <span>Contacts</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('notes', '', $event)" href="javascript:void(0);">
                <i class="fa fa-sticky-note"></i>
                <span>Notes</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="btn-group header-nav-notification visible-xs-inline-block">
          <button (click)="viewAllNotifications()" type="button" class="btn btn-default dropdown-toggle"
                  pTooltip="{{ tooltip.notifications }}" tooltipPosition="bottom">
            <i class="fa fa-bell-o"></i>
            <span class="notification-num" *ngIf="notificationService.newNotifCount > 0">
              {{ notificationService.newNotifCount }}
            </span>
          </button>
        </div>

        <div class="btn-group header-nav-notification hidden-xs">
          <button (click)="toggleViewNotifications()" type="button" class="btn btn-default dropdown-toggle"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                  pTooltip="{{ tooltip.notifications }}" tooltipPosition="bottom">
            <i class="fa fa-bell-o"></i>
            <span class="notification-num" *ngIf="notificationService.newNotifCount > 0">
              {{ notificationService.newNotifCount }}
            </span>
          </button>
          <div id="nav-notification-list" class="nav-notification-list dropdown-menu dropdown-menu-right">
            <div class="nav-notification-list-header">
              <nav class="nav-tabs-wrap pl10 pr10 clearfix">
                <ul class="nav nav-tabs pull-left list-unstyled clearfix visible-md-block visible-lg-block">
                  <li [ngClass]="selectedTab==undefined || selectedTab == 'update' ? 'active': ''">
                    <a (click)="onSelectedTab('update')" href="javascript:;">
                      Update <span class="badge active">0</span>
                    </a>
                  </li>
                  <li [ngClass]="selectedTab=='connection'? 'active': ''">
                    <a (click)="onSelectedTab('connection')" href="javascript:;">
                      Connection <span class="badge active">0</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
            <div class="nav-notification-list-content"
                 lockYOffset="30"
                 observeAttributes="true"
                 infinite-scroll
                 [scrollWindow]="false"
                 (scrolled)="getMoreNotifications()">
              <app-partials-notification-list *ngIf="notificationService.notifications.length > 0"
              [size]="'xs'" [type]="selectedTab">
              </app-partials-notification-list>

              <div *ngIf="notificationService.notifications.length == 0" class="p10">
                Currently you have no notifications
              </div>
            </div>
            <div class="nav-notification-list-footer">
              <a href="#">View all notification</a>
            </div>
          </div>
        </div>
        <div class="btn-group header-nav-profile">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false">
            <span class="avatar-xxs">
              <img alt="" width="30" [src]="(userService?.profile$ | async)?.profile_image || defaultAvatar"
                   class="lazyload">
            </span>
            <i class="fa fa-caret-down ml10 hidden-xs"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <div class="media p10">
                <div class="media-left">
                  <div class="avatar-md">
                    <img alt="" [src]="userService.profile?.profile_image">
                  </div>
                </div>
                <div class="media-body">
                  <p class="media-heading bold mb0">{{ userService.profile?.first_name }}
                    {{ userService.profile?.last_name }}</p>
                  <small class="text-fade">{{ userService.profile?.email }}</small>
                  <div class="navbar-nav-plan m">
                    <p class="media-heading bold">{{ userService.profile?.plan.name }}</p>
                    <button class="btn btn-primary" *ngIf="userService.profile?.plan?.is_trial"
                            (click)="redirectTo('my', 'plans', $event)">
                      <i class="fa fa-arrow-circle-up"></i> Upgrade
                    </button>
                  </div>
                </div>
              </div>
            </li>
            <li role="separator" class="divider"></li>
            <li><a (click)="redirectTo('my', 'settings/profile', $event)" href="javascript:;">Account</a></li>
            <li><a (click)="redirectTo('my', 'admin/invitations', $event)" href="javascript:;">Invitations</a></li>
            <li><a (click)="logout()" href="javascript:;">Sign Out</a></li>
          </ul>
        </div>
      </ng-template>
    </div>
  </div>
</nav>
