<div class="list-group-item" *ngFor="let notification of notificationService.notifications"
     data-id="notification_{{ notification.id }}"
     [ngClass]="{'unread-notification': !notification?.is_read}">
  <div class="media" *ngIf="!notification.isHidden">
    <div class="media-left can-click" (click)="viewProfile(notification?.actor)">
      <span class="avatar-xsm">
        <img [src]="notification?.actor?.profile_image" alt="{{ notification?.actor?.name }}">
      </span>
    </div>
    <div class="media-body">
      <p class="media-heading">
        <a class="link-text bold" [routerLink]="['/profile', notification?.actor?.uuid]">
          {{ notification?.actor?.name }}</a>
        <span [innerHTML]="notification.text"></span>
        <a class="link-text bold" [routerLink]="['/communities', notification?.community?.uuid]" *ngIf="notification?.community?.name">
          {{ notification?.community?.name }}</a>
      </p>
      <div *ngIf="notification?.actions[0]">
        <p *ngIf="notification?.actions[0]?.name == 'view'">
          <small (click)="doAction(notification?.actions[0], notification?.id)"
                 class="notifications-item-time text-fade can-click">
            {{ notification?.created_at | timeFormat }}
          </small>
        </p>
        <div *ngIf="notification?.actions[0]?.name != 'view'" class="notifications-item-button">
          <button *ngFor="let action of notification?.actions"
                  class="btn btn-sm mr5 text-capitalize" type="button"
                  [ngClass]="{'btn-outline-primary': action?.name == 'accept', 'btn-default': (action.name == 'cancel' || action.name == 'reject')}"
                  (click)="doAction(action, notification?.id)">
            <i class="fa"
               [ngClass]="{'fa-check': action.name == 'accept', 'fa-times': (action.name == 'cancel' || action.name == 'reject')}"></i>
            {{ action.name }}
          </button>
        </div>
      </div>
      <div *ngIf="notification?.response_actions[0]">
        <p>
          <small class="notifications-item-time text-fade can-click">
            {{ notification?.created_at | timeFormat }}
          </small>
        </p>
        <div class="notifications-item-button">
        <span *ngFor="let action of notification?.response_actions"
              class="btn-text btn-xs mr5 text-capitalize">
          <i class="fa"
             [ngClass]="{'fa-check': action.name == 'accept', 'fa-times': (action.name == 'cancel' || action.name == 'reject')}"></i>
          {{ action.name }}ed
        </span>
        </div>
      </div>
    </div>
    <div class="media-right">
      <div class="btn-group pull-right clearfix">
        <button type="button" class="btn btn-sm btn-default dropdown-toggle" (click)="getItemSettings(notification)"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <i class="fa fa-ellipsis-v"></i>
        </button>
        <ul class="dropdown-menu">
          <li><a href="javascript:;" *ngIf="notification.object_type === 'SocialNetwork::Post'" (click)="toggleNotification(notification)">{{ itemSettings?.mute ? 'Enable' : 'Disable' }} Notification for this post</a>
          <li><a href="javascript:;" (click)="confirmHideNotification(notification)">Hide this notification</a>
          </li>
          <!--<li><a href="javascript:;" (click)="turnOffNotificaion(notification)">Turn off all notifications relate to this</a>
          </li>-->
        </ul>
      </div>
      <div class="pull-right">
        <button class="btn btn-sm btn-default" type="button"
                (click)="toggleReadStatus(notification)"
                pTooltip="{{ notification.is_read ? tooltip.markAsUnread : tooltip.markAsRead }}" tooltipPosition="top">
          <i class="fa"
             [ngClass]="{'fa-circle': notification.is_read, 'fa-circle-o': !notification.is_read}"></i>
        </button>
      </div>

    </div>
  </div>
  <undo-notification [notification]="notification" *ngIf="!!notification.isHidden"></undo-notification>
</div>
<div *ngIf="notificationService.notifications.length == 0">
  <p class="p10">
    Currently you have no notifications
  </p>
</div>


<modal #modal [keyboard]="false" [animation]="false" [backdrop]="'static'">
  <modal-header [show-close]="true">
    <h4 class="modal-title"><i class="fa fa-cog"></i> Settings</h4>
  </modal-header>
  <modal-body>
    <p>Allow notifications from</p>
    <div>
      <div>
        <p-checkbox name="group1" value="social" label="Social Network"
                    [(ngModel)]="selectedNotifications"></p-checkbox>
      </div>
      <div>
        <p-checkbox name="group1" value="chat" label="Chat" [(ngModel)]="selectedNotifications"></p-checkbox>
      </div>
    </div>
  </modal-body>
  <modal-footer>
    <button type="button" (click)="save()" class="btn btn-outline-primary btn-min" data-dismiss="modal">Done</button>
    <button type="button" class="btn btn-outline-default btn-min" data-dismiss="modal">Cancel</button>
  </modal-footer>
</modal>

