<div *ngIf="selectedPhotos" id="photo-box-detail" class="photo-box-detail" [ngClass]="{'active-info': showDetails, 'active': show}">
  <div *ngIf="selectedPhotos[index]" class="photo-detail-top">
    <ul class="action navbar-left">
      <li>
        <a href="javascript:;" draggable="false" (click)="goBack()"><i class="fa fa-arrow-left"></i></a>
      </li>
    </ul>

    <!--view menu-->

    <ul *ngIf="mode == 0" class="action navbar-right">
      <li>
        <a href="javascript:;" draggable="false"
           (click)="doAction({action: 'openModal', params: {modalName: 'sharingModal'}})"><i
          class="fa fa-share-alt"></i></a>
      </li>
      <li>
        <a href="javascript:;" draggable="false" (click)="doAction({action: 'favourite'})">
          <i class="fa" [ngClass]="selectedPhotos[index].favorite ? 'fa-star': 'fa-star-o'"></i>
        </a>
      </li>
      <li>
        <a href="javascript:;" draggable="false"
           (click)="doAction({action: 'openModal', params: {modalName: 'taggingModal'}})"><i class="fa fa-tag"></i></a>
      </li>
      <li>
        <a href="javascript:;" draggable="false" (click)="editPhoto()"><i class="fa fa-edit"></i></a>
      </li>

      <li *ngIf="canDelete">
        <a href="javascript:;"
           (click)="doAction({action: 'confirmDeleteMedia', params: {selectedObjects: [selectedPhotos[index]]} })"><i
          class="fa fa-trash-o"></i></a>
      </li>
      <li class="dropdown">
        <a href="javascript:;" draggable="false" data-toggle="dropdown"><i class="fa fa-ellipsis-v"></i></a>
        <ul class="dropdown-menu dropdown-menu-lg">
          <li><a href="javascript:;" draggable="false"
                 (click)="doAction({action: 'openModal', params: {modalName: 'addToAlbumModal'}})"><i
            class="fa fa-plus-square"></i> Add to Album</a></li>
          <li>
            <a href="javascript:;"
               (click)="doAction({action: 'download', params: {selectedObjects: [selectedPhotos[index]]}})">
              <i class="fa fa-download"></i> Download
            </a>
          </li>
          <li>
            <a href="javascript:;" draggable="false" (click)="doAction({action: 'viewInfo'})"><i
              class="fa fa-info-circle"></i> Information</a>
          </li>
        </ul>
      </li>
    </ul>


    <!--editable menu-->
    <ul *ngIf="mode == 1" class="action action-text navbar-right ml10">
      <li>
        <a (click)="cropperZoom(0)" href="javascript:;" class="mr20">Reset</a>
      </li>
      <li>
        <a (click)="cancel()" href="javascript:;" class="mr20">Cancel</a>
      </li>
      <li *ngIf="!editing">
        <a (click)="cropperDone()" href="javascript:;">Done</a>
      </li>
      <li>
        <a (click)="cropperSave()" href="javascript:;">Save</a>
      </li>
    </ul>

    <ul *ngIf="mode == 1" class="action navbar-right">
      <li>
        <a (click)="cropCropper()" href="javascript:;"><i class="fa fa-crop"></i></a>
      </li>
      <li>
        <a (click)="cropperZoom(-0.1)" href="javascript:;"><i class="fa fa-search-minus"></i></a>
      </li>
      <li>
        <a (click)="cropperZoom(0.1)" href="javascript:;"><i class="fa fa-search-plus"></i></a>
      </li>
      <li>
        <a (click)="rotateCropper(true)" href="javascript:;"><i class="fa fa-rotate-left"></i></a>
      </li>
      <li>
        <a (click)="rotateCropper()" href="javascript:;"><i class="fa fa-rotate-right"></i></a>
      </li>
    </ul>


    <div class="name"><i class="fa fa-picture-o"></i> {{selectedPhotos[index].name}}.{{selectedPhotos[index].extension}}
    </div>
  </div>

  <div *ngIf="mode == 0" class="photo-detail-top-info">
    <div class="photo-detail-top-num" *ngIf="selectedPhotos.length > 1">
      {{index + 1}} of {{selectedPhotos.length}}
    </div>
    <div *ngIf="selectedPhotos[index]" class="photo-detail-top-txt">
      {{selectedPhotos[index].description}}
    </div>
  </div>

  <div *ngIf="mode == 0" class="photo-detail-bottom-action">
    <a draggable="false" href="javascript:;" (click)="cropperZoom(-0.1)"><i class="fa fa-minus"></i></a>
    <a draggable="false" href="javascript:;" (click)="cropperZoom(0)"><i class="fa fa-refresh"></i></a>
    <a draggable="false" href="javascript:;" (click)="cropperZoom(0.1)"><i class="fa fa-plus"></i></a>
  </div>

  <div class="photo-detail-content">
    <div class="photo-detail-img">

      <!--view mode-->
      <div class="image-figure" [ngClass]="{'img-loading': loading}" id="cropper-wrap">
        <figure>
          <img imgFull class="img-zoom-{{imgZoomClass}}" draggable="false" id="photo-detail-image"
               [src]="photo?.url" alt="">
        </figure>
      </div>
      <!--edit mode-->
      <!--<div *ngIf="mode==1" class="image-figure" [ngClass]="{'img-loading': loading}" id="cropper-wrap">-->
        <!--<img id="photo-detail-image" [src]="selectedPhotos[index]?.url" alt="">-->
      <!--</div>-->

      <span *ngIf="(ids.length>1 && mode==0)" draggable="false" (click)="move(false)"
            class="photo-detail-img-control img-control-prev">
        <i class="fa fa-angle-left"></i>
      </span>
      <span *ngIf="(ids.length>1 && mode==0)" draggable="false" (click)="move()"
            class="photo-detail-img-control img-control-next">
        <i class="fa fa-angle-right"></i>
      </span>
    </div>
  </div>


  <div *ngIf="selectedPhotos[index]" class="photo-detail-info">
    <h3>Information <a href="javascript:;" draggable="false" (click)="doAction({action: 'viewInfo'})"><i
      class="fa fa-times"></i></a></h3>
    <div class="photo-detail-info-title">
      <h4><i class="fa fa-file-text-o"></i> Details</h4>
      <a href="javascript:;"
         draggable="false"
         (click)="doAction({action: 'openModal', params: {modalName: 'editInfoModal'}, data: selectedPhotos[index]})">
        Edit
      </a>
    </div>
    <dl class="dl-horizontal">
      <dt>Name</dt>
      <dd>{{selectedPhotos[index].name}}</dd>
      <dt>Description</dt>
      <dd>{{selectedPhotos[index].description}}</dd>
      <dt>Type</dt>
      <dd>{{selectedPhotos[index].extension}}</dd>
      <dt>Size</dt>
      <dd>{{selectedPhotos[index].size | bytes:3}}</dd>
      <dt>Dimensions</dt>
      <dd>{{selectedPhotos[index].dimensions}}</dd>
      <dt>Uploaded</dt>
      <dd>{{selectedPhotos[index].created_at | date:'yMMMd'}}</dd>
    </dl>
    <div class="photo-detail-info-title">
      <h4><i class="fa fa-tag"></i> Tag </h4>
      <a href="javascript:;" draggable="false"
         (click)="doAction({action: 'openModal', params: {modalName: 'taggingModal'}})">Edit</a>
    </div>
    <div class="tags-text">
      <span *ngFor="let tag of selectedPhotos[index].json_tags">{{tag.name}}</span>
    </div>


    <div class="photo-detail-info-title">
      <h4><i class="fa fa-share-alt"></i> Sharing</h4>
      <a href="javascript:;" draggable="false"
         (click)="doAction({action: 'openModal', params: {modalName: 'sharingModal'}})">Edit</a>
    </div>
    <dl>
      <dt>Owner</dt>
      <dd>
        <ul class="list-unstyled">
          <li>
            <img src="assets/images/zone/img-group.png" alt="{{selectedPhotos[index].owner.name}}"
                   title="{{selectedPhotos[index].owner.name}}"> {{selectedPhotos[index].owner.name}}
          </li>
        </ul>
      </dd>

      <dt>Shared with</dt>
      <dd>
        <ul class="list-unstyled">
          <li *ngFor="let contact of selectedPhotos[index]?.json_shares?.contacts">
            <img src="assets/images/zone/img-group.png" title="{{contact.name}}">
            {{contact.name}}
          </li>
        </ul>
      </dd>
    </dl>
  </div>
</div>

<template #modalContainer></template>
