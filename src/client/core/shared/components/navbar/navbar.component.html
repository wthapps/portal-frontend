<nav class="header-nav" role="navigation">
  <div class="container-fluid">
    <div class="header-nav-left">
      <ng-content></ng-content>
    </div>
    <div class="header-nav-right">
      <ng-template [ngIf]="!userService.loggedIn">
        <div class="btn-group header-nav-link">
          <a [routerLink]="['/signup']" class="btn btn-link" href="#">Sign up</a>
        </div>
        <div class="btn-group header-nav-link">
          <a [routerLink]="['/login']" class="btn btn-link" href="#">Log in</a>
        </div>
      </ng-template>
      <ng-template [ngIf]="userService.loggedIn">
        <div class="btn-group header-nav-apps">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                  pTooltip="{{ tooltip.wthApps }}" tooltipPosition="bottom">
            <i class="fa fa-th"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <a (click)="redirectTo('social', '', $event)" href="javascript:;">
                <i class="fa fa-globe"></i>
                <span>Social</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('chat', '', $event)" href="javascript:;">
                <i class="fa fa-comments"></i>
                <span>Chat</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('media', '', $event)" href="javascript:;">
                <i class="fa fa-picture-o"></i>
                <span>Pictures</span>
              </a>
            </li>
            <li>
              <a (click)="redirectTo('contacts', '', $event)" href="javascript:;">
                <i class="fa fa-address-book"></i>
                <span>Contacts</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="btn-group header-nav-notification visible-xs-inline-block">
          <button (click)="viewAllNotifications()" type="button" class="btn btn-default dropdown-toggle"
                  pTooltip="{{ tooltip.notifications }}" tooltipPosition="bottom">
            <i class="fa fa-bell-o"></i>
            <span class="notification-num" *ngIf="notificationService.newNotifCount > 0">
              {{ notificationService.newNotifCount }}
            </span>
          </button>
        </div>

        <div class="btn-group header-nav-notification hidden-xs">
          <button (click)="toggleViewNotifications()" type="button" class="btn btn-default dropdown-toggle"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                  pTooltip="{{ tooltip.notifications }}" tooltipPosition="bottom">
            <i class="fa fa-bell-o"></i>
            <span class="notification-num" *ngIf="notificationService.newNotifCount > 0">
              {{ notificationService.newNotifCount }}
            </span>
          </button>
          <ul id="nav-notification-list" class="dropdown-menu dropdown-menu-right">
            <li class="dropdown-menu-bar">
              <div class="pull-left">
                <span class="bold">Notification</span>
              </div>
              <div class="pull-right">
                <a href="javascript:;" (click)="markAllAsRead()">Mark All as Read</a>
                <a href="javascript:;">Settings</a>
              </div>
            </li>
            <li>
              <ul class="list-unstyled" id="notification-items"
                  lockYOffset="30"
                  observeAttributes="true"
                  infinite-scroll
                  [scrollWindow]="false"
                  (scrolled)="getMoreNotifications()">
                <li class="navbar-nav-notification-item"
                    *ngFor="let notification of notificationService.notifications"
                    [ngClass]="{'unread-notification': !notification?.is_read }">
                  <div class="media" data-id="notification_{{ notification.id }}">
                    <notification-item [notification]="notification"></notification-item>
                  </div>
                </li>
                <li *ngIf="notificationService.notifications.length == 0">
                  <div class="p10">
                    Currently you have no notifications
                  </div>
                </li>
              </ul>
            </li>
            <li class="view-all">
              <a href="javascript:;" (click)="viewAllNotifications()">View All</a>
            </li>
          </ul>
        </div>
        <div class="btn-group header-nav-profile">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false">
            <span class="avatar-xxs">
              <img alt="" width="30" [src]="userService.profile.profile_image">
            </span>
            <i class="fa fa-caret-down ml10 hidden-xs"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li>
              <div class="media p10">
                <div class="media-left">
                  <div class="avatar-md">
                    <img alt="" [src]="userService.profile.profile_image">
                  </div>
                </div>
                <div class="media-body">
                  <p class="media-heading bold mb0">{{ userService.profile.first_name }}
                    {{ userService.profile.last_name }}</p>
                  <small class="text-fade">{{ userService.profile.email }}</small>
                  <div class="navbar-nav-plan m">
                    <p class="media-heading bold">{{ userService.profile.plan.name }}</p>
                    <button class="btn btn-primary" *ngIf="userService.profile.plan.is_trial"
                            (click)="redirectTo('my', 'plans', $event)">
                      <i class="fa fa-arrow-circle-up"></i> Upgrade
                    </button>
                  </div>
                </div>
              </div>
            </li>
            <li role="separator" class="divider"></li>
            <li><a (click)="redirectTo('my', 'setting/profile', $event)" href="javascript:;">Profile</a></li>
            <li><a (click)="redirectTo('my', 'setting/account', $event)" href="javascript:;">Account</a></li>
            <li><a (click)="redirectTo('my', 'setting/preferences', $event)" href="javascript:;">Preferences</a></li>
            <li><a (click)="redirectTo('my', 'admin/invitations', $event)" href="javascript:;">Invitations</a></li>
            <li role="separator" class="divider"></li>
            <li><a (click)="redirectTo('my', 'plans', $event)" href="javascript:;">Plans</a></li>
            <li role="separator" class="divider"></li>
            <li><a (click)="logout()" href="javascript:;">Sign Out</a></li>
          </ul>
        </div>
      </ng-template>

    </div>
  </div>
</nav>
